<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <h1>This is a mock of mobile client</h1>
        <p>Here we define the interface. Then implement on backend and in mobile client.</p>
        <h2>Elements to implement</h2>
        <ul>
            <li>Connect button: to connect clients to each other</li>
            <ul>
                <li>Client id</li>
                <li>Group id</li>
                <li>Button should tell server "Client X1 of group G1 wants to connect to client X2 of group G2"</li>
                <li>Then the server should merge the groups</li>
            </ul>
            <li>Player / Host switch</li>
            <li>Common elements</li>
            <ul>
                <li>List of teams</li>
            </ul>
            <li>Player screen</li>
            <ul>
                <li>Team name</li>
                <li>Button</li>
            </ul>
            <li>Host screen</li>
            <ul>
                <li>Timer button</li>
                <li>Reset button</li>
                <li>Settings</li>
            </ul>
        </ul>
        
        <div>
            <h4 id='connectLink'></h4>
            <input id='connectInput' placeholder="link from another client">
        </div>

        <ul id="messages"></ul>
        <input id = "input"><button id="button">Emit</button>

        <script src="/socket.io/socket.io.js"></script>
        <script>
            let socket = io("ws://localhost:3000");
            let input = document.getElementById("input");
            let button = document.getElementById("button");
            let messages = document.getElementById("messages")
            const connectLink = document.getElementById('connectLink')
            const connectInput = document.getElementById('connectInput')

            connectInput.addEventListener("change", () => {
                console.log(`submitted ${connectInput.value}`)
                socket.emit("join", connectInput.value)
                connectInput.value = "";
            })
            
            button.addEventListener("click", () => {
                if(input.value) {
                    socket.emit("alarma", input.value);
                    input.value = "";
                }
            });
            input.addEventListener("change", () => {
                if(input.value) {
                    socket.emit("alarma", input.value);
                    input.value = "";
                }
            });
            socket.on('connect', ()=>{
                connectLink.innerHTML = socket.id
            })
            socket.on("no-panic", (msg) => {
                let item = document.createElement('li')
                item.textContent = msg
                messages.appendChild(item)
            });
        </script>
    </body>
</html>